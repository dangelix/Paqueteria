
<div class="content-wrapper" lang="es-mx" ng-cloak>
	<div class="container-fluid">

<div class="topBanner rounded-bottom">
<br>
	<div class="row">
	<div class="col-md-1"></div>
		<div class="col-md-3">
			<div class="input-group">
				<input type="text" class="form-control" placeholder="Numero de Envio"
					ng-model="buscar.guia">
				<div class="input-group-btn">
					<button class="btn btn-info" type="submit">
						<i class="glyphicon glyphicon-search"></i>
					</button>
				</div>
				<div class="col-md-3"></div>
		<div class="col-md-3">
		 <button type="button" class="btn btn-info " data-toggle="modal" ng-click="generarFolio()" data-target="#modalVenta">Agregar Venta</button>
<!-- 		<button class="btn btn-small" ng-click="verTodo()">Ver Todo </button> -->
						
		</div>
			</div>
		</div>
<div class="col-md-3"></div>

	</div>
	<br>
		</div>
		
<!-- FIN TOP -->
    
<!--     <div class="container"> -->
    
    <br>
		<table class="table .table-striped">
			<thead>
				<tr>
					<th width="5%"></th>
					<th>Folio</th>
					
					<th>Fecha</th>
					<th>Cantidad</th>
					<th>Estatus</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="v in ventas">
					<td></td>
					<td>{{v.folio}}</td>
					
					<td>{{v.fecha}}</td>
					<td>{{v.cantidad}}</td>
					<td>{{v.estatus}}</td>
					<td HEIGHT="50"><button class="btn btn-success" ng-click="ver(g)" title="Asignar Sucursal" data-toggle="modal" data-target="#modalAsignar" ng-if="g.estatus=='NO ASIGNADA'" >
							<i class="fa fa-building-o"></i>
						</button>
						
						<button class="btn btn-danger" title="Imprimir" ng-click="generaPDF(e.id)">
							<i class="fa fa-file-pdf-o"></i>
						</button>
						
						<button class="btn btn-warning" ng-click="cancelar(g)" title="Cancelar" ng-if="g.estatus!='CANCELADA'">
							<i class="fa fa-trash"></i>
						</button>
<!-- 						<a class="btn btn-info" data-toggle="tooltip" -->
<!-- 							title="Imprimir OT" -->
<!-- 							href=" ots/descargaOt/{{ot.id}}" download="ordenDeTrabajo.pdf"> -->
<!-- 							<i class="glyphicon glyphicon-print"></i> -->
<!-- 						</a>	 -->
					</td>
				</tr>
			</tbody>	
		</table>
    
<!--     </div> -->
    
<!--    MODAL AGREGAR GUIA -->
     <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          
          <h4 class="modal-title">Rango de Guia</h4>
        </div>
        <div class="modal-body">
             
      
      <div class="card-body">
        <form>
          <div class="form-group">
            <label for="exampleInputEmail1">De</label>
            <input class="form-control" id="exampleInputEmail1" type="text" placeholder="Ingresar Inicio Guia" ng-model="de">
          </div>
       
        <div class="form-group">
            <label for="exampleInputEmail1">Hasta</label>
            <input class="form-control" id="exampleInputEmail1" type="text"  placeholder="Ingresar Fin Guia" ng-model="hasta">
          </div>
          
          <a class="btn btn-success btn-block" ng-click="addguias(de,hasta)">Agregar</a>
        </form>

      </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
<!--     MODAL ASIGNAR GUIA -->

    <div class="modal fade" id="modalAsignar" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          
          <h4 class="modal-title">Asignar Guia</h4>
        </div>
        <div class="modal-body">
             
      
      <div class="card-body">
        <form>
          <div class="form-group">
            <label for="exampleInputEmail1">Numero de Guia</label>
            <input class="form-control" id="exampleInputEmail1" type="text"  ng-model="guia.numero" readonly>
          </div>
       
        <div class="form-group">
            <label for="exampleInputEmail1">Estado</label>
            <input class="form-control" id="exampleInputEmail1" type="text"   ng-model="guia.estatus" readonly>
          </div>
          
           <div class="form-group">
            <label for="exampleInputEmail1">Sucursal Actual</label>
            <input class="form-control" id="exampleInputEmail1" type="text"  placeholder="No hay Sucursal Asignada" ng-model="guia.sucursal" readonly>
          </div>
          <br><br>
           <div class="form-group">
            <label for="exampleInputEmail1">Nueva Sucursal</label>
            <select class="form-control" ng-model="addsuc.idSucursal"
										required>
										<option ng-repeat="s in sucursal" value="{{s.id}}" ng-if="s.nombre!='MASTER'">{{s.nombre}}</option>
										
										</select>
          </div>
          <div align="center">
          <div class="w-50 p-3" >
          <a class="btn btn-primary btn-block" style="color:white;" ng-click="asignar(addsuc.idSucursal,guia.id)" >Asignar</a>
          </div>
          </div>
        </form>

      </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" >Close</button>
        </div>
      </div>
    </div>
  </div>
<!--   MODAL ALTA Envio -->
<!--    <div class="modal fade" id="modalEnvio" role="dialog"> -->
<!--     <div class="modal-dialog modal-lg"> -->
<!--       <div class="modal-content"> -->
<!--         <div class="modal-header"> -->
          
<!--           <h4 class="modal-title">Registrar Envios</h4> -->
<!--           <button type="button" class="close" data-dismiss="modal">&times;</button> -->
<!--         </div> -->
<!--         <div class="modal-body"> -->
<!--           <form id="regForm" action="/action_page.php"> -->
<!--   <h1>Register:</h1> -->
<!--   <!-- One "tab" for each step in the form: --> 
<!--   <div class="tab">Name: -->
<!--     <p><input placeholder="First name..." oninput="this.className = ''" name="fname"></p> -->
<!--     <p><input placeholder="Last name..." oninput="this.className = ''" name="lname"></p> -->
<!--   </div> -->
<!--   <div class="tab">Contact Info: -->
<!--     <p><input placeholder="E-mail..." oninput="this.className = ''" name="email"></p> -->
<!--     <p><input placeholder="Phone..." oninput="this.className = ''" name="phone"></p> -->
<!--   </div> -->
<!--   <div class="tab">Birthday: -->
<!--     <p><input placeholder="dd" oninput="this.className = ''" name="dd"></p> -->
<!--     <p><input placeholder="mm" oninput="this.className = ''" name="nn"></p> -->
<!--     <p><input placeholder="yyyy" oninput="this.className = ''" name="yyyy"></p> -->
<!--   </div> -->
<!--   <div class="tab">Login Info: -->
<!--     <p><input placeholder="Username..." oninput="this.className = ''" name="uname"></p> -->
<!--     <p><input placeholder="Password..." oninput="this.className = ''" name="pword" type="password"></p> -->
<!--   </div> -->
<!--   <div style="overflow:auto;"> -->
<!--     <div style="float:right;"> -->
<!--       <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button> -->
<!--       <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button> -->
<!--     </div> -->
<!--   </div> -->
<!--   <!-- Circles which indicates the steps of the form: -->
<!--   <div style="text-align:center;margin-top:40px;"> -->
<!--     <span class="step"></span> -->
<!--     <span class="step"></span> -->
<!--     <span class="step"></span> -->
<!--     <span class="step"></span> -->
<!--   </div> -->
<!-- </form> -->
<!--         </div> -->
<!--         <div class="modal-footer"> -->
<!--           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
<!--         </div> -->
<!--       </div> -->
<!--     </div></div> -->
<!--   MODAL ALTA VENTA -->
   <div class="modal fade" id="modalVenta" role="dialog">
<div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          
          <h4 class="modal-title">Nueva Venta</h4>
        </div>
        <div class="modal-body">
             
      
      <div class="card-body">
        <form>
          <div class="form-group">
            <label for="exampleInputEmail1">Folio</label>
            <input class="form-control" type="text"  ng-model="venta.folio" >
          </div>
       
        <div class="form-group">
            <label for="exampleInputEmail1">Fecha</label>
            <input class="form-control" type="date" style="text-align:center;" ng-model="venta.fecha" readonly>
          </div>
          
           <div class="form-group">
            <label for="exampleInputEmail1">Cantidad</label>
            <input class="form-control" type="number" min="1"  ng-model="venta.cantidad" >
          </div>
         
          <div align="center">
          <div class="w-50 p-3" >
          <a class="btn btn-primary btn-block" style="color:white;" ng-click="newVenta()" >Guardar</a>
          </div>
          </div>
        </form>

      </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" >Close</button>
        </div>
      </div>
    </div>
 </div>
<!-- FIN -->
 

</div>	
	</div>

	
	<script>
	var currentTab = 0; // Current tab is set to be the first tab (0)
	showTab(currentTab); // Display the crurrent tab

	function showTab(n) {
	  // This function will display the specified tab of the form...
	  var x = document.getElementsByClassName("tab");
	  x[n].style.display = "block";
	  //... and fix the Previous/Next buttons:
	  if (n == 0) {
	    document.getElementById("prevBtn").style.display = "none";
	  } else {
	    document.getElementById("prevBtn").style.display = "inline";
	  }
	  if (n == (x.length - 1)) {
	    document.getElementById("nextBtn").innerHTML = "Guardar";
	  } else {
	    document.getElementById("nextBtn").innerHTML = "Continuar";
	  }
	  //... and run a function that will display the correct step indicator:
	  fixStepIndicator(n)
	}

	function nextPrev(n) {
	  // This function will figure out which tab to display
	  var x = document.getElementsByClassName("tab");
	  // Exit the function if any field in the current tab is invalid:
	  if (n == 1 && !validateForm()) return false;
	  // Hide the current tab:
	  x[currentTab].style.display = "none";
	  // Increase or decrease the current tab by 1:
	  currentTab = currentTab + n;
	  // if you have reached the end of the form...
	  if (currentTab >= x.length) {
	    // ... the form gets submitted:
	    document.getElementById("regForm").submit();
	    return false;
	  }
	  // Otherwise, display the correct tab:
	  showTab(currentTab);
	}

	function validateForm() {
	  // This function deals with validation of the form fields
	  var x, y, i, valid = true;
	  x = document.getElementsByClassName("tab");
	  y = x[currentTab].getElementsByTagName("input");
	  // A loop that checks every input field in the current tab:
	  for (i = 0; i < y.length; i++) {
	    // If a field is empty...
	    if (y[i].value == "") {
	      // add an "invalid" class to the field:
	      y[i].className += " invalid";
	      // and set the current valid status to false
	      valid = false;
	    }
	  }
	  // If the valid status is true, mark the step as finished and valid:
	  if (valid) {
	    document.getElementsByClassName("step")[currentTab].className += " finish";
	  }
	  return valid; // return the valid status
	}

	function fixStepIndicator(n) {
	  // This function removes the "active" class of all steps...
	  var i, x = document.getElementsByClassName("step");
	  for (i = 0; i < x.length; i++) {
	    x[i].className = x[i].className.replace(" active", "");
	  }
	  //... and adds the "active" class on the current step:
	  x[n].className += " active";
	}
	</script>


